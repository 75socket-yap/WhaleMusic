(function(){"use strict";var e={3918:function(e,t,n){var a=n(5130),r=n(6768);function s(e,t,n,a,s,o){const i=(0,r.g2)("MainHeader"),c=(0,r.g2)("MainCenter");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(i),(0,r.bF)(c)],64)}var o=n.p+"img/homeBtn.1ab163d5.png",i=n.p+"img/searchBtn.9e724fd8.png";const c={class:"header"},l={class:"headerItems"},d={class:"homeBtn"},u={class:"headerSearch"};function h(e,t,n,s,h,m){return(0,r.uX)(),(0,r.CE)("div",c,[(0,r.Lk)("div",l,[(0,r.Lk)("button",d,[(0,r.Lk)("img",{src:o,alt:"Music Whale Search Button",height:"20px",onClick:t[0]||(t[0]=e=>m.goMain())})]),(0,r.Lk)("div",u,[(0,r.Lk)("button",{class:"searchBtn",onClick:t[1]||(t[1]=e=>m.goSearch())},t[4]||(t[4]=[(0,r.Lk)("img",{src:i,alt:"Music Whale Search Button",height:"14px"},null,-1)])),(0,r.bo)((0,r.Lk)("input",{class:"headerInput",placeholder:"어떤 콘텐츠를 감상하고 싶으세요?",onfocus:"this.placeholder=''",onblur:"this.placeholder='어떤 콘텐츠를 감상하고 싶으세요?'","onUpdate:modelValue":t[2]||(t[2]=e=>this.query=e),onClick:t[3]||(t[3]=e=>m.goSearchHome())},null,512),[[a.Jo,this.query]])])])])}var m={data(){return{query:null}},methods:{goMain(){this.$router.replace("/whale/streaming/recommend")},goSearchHome(){this.$router.replace("/whale/streaming/searchHome")},goSearch(){this.$router.replace(`/whale/streaming/search/${this.query}`)}}},p=n(1241);const v=(0,p.A)(m,[["render",h],["__scopeId","data-v-47313120"]]);var f=v;const g={class:"main"};function k(e,t,n,a,s,o){const i=(0,r.g2)("MainLibrary"),c=(0,r.g2)("MainContent"),l=(0,r.g2)("MainDetail");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",g,[(0,r.bF)(i),(0,r.bF)(c),(0,r.bF)(l)]),t[0]||(t[0]=(0,r.Lk)("div",{class:"footer"},null,-1))],64)}var y=n(4232);function b(e,t,n,a,s,o){return(0,r.uX)(),(0,r.CE)("div",{class:"mainLibraryFrame",style:(0,y.Tr)({width:s.isExpanded?"420px":"110px"})},[(0,r.Lk)("div",{class:"mainLibrary",style:(0,y.Tr)({width:s.isExpanded?"88%":"62%"})},[((0,r.uX)(),(0,r.CE)("svg",{"data-encore-id":"icon",role:"img","aria-hidden":"true",viewBox:"0 0 24 24",class:"libraryBtn",onClick:t[0]||(t[0]=e=>o.expandLibrary())},t[1]||(t[1]=[(0,r.Lk)("path",{d:"M14.5 2.134a1 1 0 0 1 1 0l6 3.464a1 1 0 0 1 .5.866V21a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1V3a1 1 0 0 1 .5-.866zM16 4.732V20h4V7.041l-4-2.309zM3 22a1 1 0 0 1-1-1V3a1 1 0 0 1 2 0v18a1 1 0 0 1-1 1zm6 0a1 1 0 0 1-1-1V3a1 1 0 0 1 2 0v18a1 1 0 0 1-1 1z"},null,-1)])))],4)],4)}var C={data(){return{isExpanded:!1}},methods:{expandLibrary(){this.isExpanded=!this.isExpanded}}};const L=(0,p.A)(C,[["render",b],["__scopeId","data-v-bfe8c19a"]]);var E=L;const w={class:"mainContentFrame"},T={class:"mainContent"},x={class:"mainContentMargin"};function M(e,t,n,a,s,o){const i=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",w,[(0,r.Lk)("div",T,[(0,r.Lk)("div",x,[(0,r.bF)(i)])])])}var S={components:{},mounted(){this.$router.replace("/whale/streaming/recommend")},methods:{}};const A=(0,p.A)(S,[["render",M],["__scopeId","data-v-b1ef11e2"]]);var I=A;const P={class:"mainDetailFrame"};function _(e,t,n,a,s,o){return(0,r.uX)(),(0,r.CE)("div",P)}var F={};const X=(0,p.A)(F,[["render",_],["__scopeId","data-v-7b2ebe09"]]);var $=X,O={components:{MainLibrary:E,MainContent:I,MainDetail:$}};const B=(0,p.A)(O,[["render",k],["__scopeId","data-v-83476546"]]);var j=B,H={components:{MainHeader:f,MainCenter:j},methods:{}};const q=(0,p.A)(H,[["render",s]]);var D=q,N=n(1387),V=n.p+"img/like.3340caa3.png";const z={class:"recommendations"},U={class:"recommendationContents"},K=["onMouseover","onMouseleave"],J=["onClick"],R={class:"recommendationCover"},W=["src","alt"],Q={class:"recommendationInfo"},G={class:"trackName"},Y={class:"artistName"};function Z(e,t,n,a,s,o){return(0,r.uX)(),(0,r.CE)(r.FK,null,[t[2]||(t[2]=(0,r.Lk)("div",{class:"recommendationsHeader"},null,-1)),(0,r.Lk)("div",z,[t[1]||(t[1]=(0,r.Lk)("div",{class:"recommendationTitle"},[(0,r.Lk)("p",{class:"titleName"},"내가 즐겨 듣는 노래")],-1)),(0,r.Lk)("div",U,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.recommendations,((e,n)=>((0,r.uX)(),(0,r.CE)("div",{class:"recommendationContent",key:n,onMouseover:e=>s.isShow[n]=!0,onMouseleave:e=>s.isShow[n]=!1},[o.addIsShow(n)?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"recommendationLike",onClick:e=>o.insertTrack(n)},t[0]||(t[0]=[(0,r.Lk)("img",{src:V,alt:"Like Button",width:"30",height:"30",style:{"border-radius":"8px",opacity:"0.75"}},null,-1)]),8,J)):(0,r.Q3)("",!0),(0,r.Lk)("div",R,[(0,r.Lk)("img",{src:e.album.images[0].url,alt:e.name,width:"120",height:"120",style:{"border-radius":"8px"}},null,8,W)]),(0,r.Lk)("div",Q,[(0,r.Lk)("p",G,(0,y.v_)(e.name),1),(0,r.Lk)("p",Y,(0,y.v_)(e.artists[0].name),1)])],40,K)))),128))])])],64)}n(4114);var ee={data(){return{recommendations:null,isShow:[]}},mounted(){this.getUserTopItems()},methods:{async getUserTopItems(){const e=await fetch("/whale/streaming/getContents");if(await e.ok){const t=await e.json();t.items&&t.items.length>0?this.recommendations=t.items:console.error("No items found")}else console.error("Failed to fetch user top items:",e.statusText)},async insertTrack(e){try{const t={trackArtist:this.recommendations[e].artists[0].name,trackName:this.recommendations[e].name,trackAlbum:this.recommendations[e].album.name,trackCover:this.recommendations[e].album.images[0].url,trackSpotifyId:this.recommendations[e].id},n=await fetch("http://localhost:9002/whale/streaming/insertTrack",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});n.ok?console.log("Success fetching Data to the Spring Wep App"):console.error("Failed to fetch the track info: ",n.statusText)}catch(t){console.error("Error while fetching the track info:",t)}},addIsShow(e){return this.isShow.push(!1),this.isShow[e]}}};const te=(0,p.A)(ee,[["render",Z],["__scopeId","data-v-cb7a13ac"]]);var ne=te;const ae={class:"search-container"};function re(e,t,n,a,s,o){return(0,r.uX)(),(0,r.CE)("div",ae,t[0]||(t[0]=[(0,r.Lk)("h1",null,"Search Home",-1)]))}var se={data(){return{}},mounted(){},methods:{}};const oe=(0,p.A)(se,[["render",re]]);var ie=oe;const ce={class:"search-container"};function le(e,t,n,a,s,o){return(0,r.uX)(),(0,r.CE)("div",ce,t[0]||(t[0]=[(0,r.Lk)("div",{id:"pagination"},null,-1),(0,r.Lk)("div",{id:"search-results"},null,-1)]))}var de={data(){return{currentPage:1,itemsPerPage:10}},mounted(){this.$route.params.query&&(this.currentPage=1,this.searchTracks(this.$route.params.query,this.currentPage))},methods:{searchTracks(e,t=1){const n=(t-1)*this.itemsPerPage;fetch(`https://api.spotify.com/v1/search?q=${encodeURIComponent(e)}&type=track&limit=${this.itemsPerPage}&offset=${n}`,{headers:{Authorization:`Bearer ${sessionStorage.accessToken}`}}).then((e=>e.json())).then((n=>{this.displaySearchResults(n.tracks.items),this.setupPagination(n.tracks.total,t,e)})).catch((e=>console.error("검색 에러:",e)))},setupPagination(e,t,n){const a=document.getElementById("pagination");a.innerHTML="";const r=Math.ceil(e/this.itemsPerPage);if(t>1){const e=document.createElement("button");e.innerText="이전",e.addEventListener("click",(()=>{this.searchTracks(n,t-1)})),a.appendChild(e)}const s=document.createElement("span");if(s.innerText=`페이지 ${t} / ${r}`,a.appendChild(s),t<r){const e=document.createElement("button");e.innerText="다음",e.addEventListener("click",(()=>{this.searchTracks(n,t+1)})),a.appendChild(e)}},displaySearchResults(e){const t=document.getElementById("search-results");t.innerHTML="",e.forEach((e=>{const n=document.createElement("div");n.classList.add("track-item");const a=document.createElement("img");a.src=e.album.images[0]?e.album.images[0].url:"";const r=document.createElement("div");r.classList.add("track-details");const s=document.createElement("div");s.innerText=e.name;const o=document.createElement("div");o.innerText=e.artists.map((e=>e.name)).join(", "),o.classList.add("artist-name"),r.appendChild(s),r.appendChild(o);const i=document.createElement("button");i.addEventListener("click",(()=>{this.playTrack(sessionStorage.device_id,e.uri)})),n.appendChild(a),n.appendChild(r),n.appendChild(i),t.appendChild(n)}))},playTrack(e,t){fetch(`https://api.spotify.com/v1/me/player/play?device_id=${e}`,{method:"PUT",body:JSON.stringify({uris:[t]}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.accessToken}`}}).then((()=>{console.log("재생 시작:",t)})).catch((e=>console.error("재생 에러:",e)))}}};const ue=(0,p.A)(de,[["render",le]]);var he=ue;const me={class:"detail-container"};function pe(e,t,n,a,s,o){return(0,r.uX)(),(0,r.CE)("div",me,t[0]||(t[0]=[(0,r.Lk)("h1",null,"Artist Detail",-1)]))}var ve={data(){return{}},mounted(){},methods:{}};const fe=(0,p.A)(ve,[["render",pe]]);var ge=fe;const ke={class:"detail-container"};function ye(e,t,n,a,s,o){return(0,r.uX)(),(0,r.CE)("div",ke,t[0]||(t[0]=[(0,r.Lk)("h1",null,"Album Detail",-1)]))}var be={data(){return{}},mounted(){},methods:{}};const Ce=(0,p.A)(be,[["render",ye]]);var Le=Ce;const Ee={class:"playlist-container"};function we(e,t,n,a,s,o){return(0,r.uX)(),(0,r.CE)("div",Ee,t[0]||(t[0]=[(0,r.Lk)("h1",null,"Playlist Detail",-1)]))}var Te={data(){return{}},mounted(){},methods:{}};const xe=(0,p.A)(Te,[["render",we]]);var Me=xe;const Se=[{path:"/whale/streaming/recommend",component:ne},{path:"/whale/streaming/searchHome",component:ie},{path:"/whale/streaming/search/:query",component:he},{path:"/whale/streaming/detail/artist",component:ge},{path:"/whale/streaming/detail/album",component:Le},{path:"/whale/streaming/playlist",component:Me}],Ae=(0,N.aE)({history:(0,N.sC)(),routes:Se});var Ie=Ae;(0,a.Ef)(D).use(Ie).mount("#app")}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,a,r,s){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],r=e[d][1],s=e[d][2];for(var i=!0,c=0;c<a.length;c++)(!1&s||o>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[c])}))?a.splice(c--,1):(i=!1,s<o&&(o=s));if(i){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[a,r,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/"}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,s,o=a[0],i=a[1],c=a[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(c)var d=c(n)}for(t&&t(a);l<o.length;l++)s=o[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(d)},a=self["webpackChunkclient"]=self["webpackChunkclient"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(3918)}));a=n.O(a)})();
//# sourceMappingURL=app.ba73c40f.js.map